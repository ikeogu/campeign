import{a as $,r as d,u as A,j as e,H as E}from"./app-CwKyFJJF.js";import{A as L}from"./AuthenticatedLayout-BEGUbsR7.js";import"./ApplicationLogo-CdWcavCF.js";import"./transition-CbAOMiPF.js";const C=o=>({twitter:{name:"X / Twitter",classes:"bg-blue-50 text-blue-600 border-blue-200"},whatsapp:{name:"WhatsApp",classes:"bg-green-50 text-green-600 border-green-200"},facebook:{name:"Facebook",classes:"bg-indigo-50 text-indigo-600 border-indigo-200"},instagram:{name:"Instagram",classes:"bg-pink-50 text-pink-600 border-pink-200"},tiktok:{name:"TikTok",classes:"bg-slate-900 text-slate-100 border-slate-700"},youtube:{name:"YouTube",classes:"bg-red-50 text-red-600 border-red-200"}})[o?.toLowerCase()]||{name:o,classes:"bg-gray-50 text-gray-600 border-gray-200"};function O({gig:o}){const{auth:p}=$().props,[m,u]=d.useState(null),b=d.useMemo(()=>Array.isArray(o.platforms)?o.platforms:JSON.parse(o.platforms??"[]"),[o.platforms]),[x,y]=d.useState({}),{data:n,setData:k,post:j,processing:f,errors:c,transform:v,clearErrors:N}=A({submissions:b.map(s=>({platform:s,link:"",proof:null}))}),h=(s,r,a)=>{u(null),N(`submissions.${s}.link`,`submissions.${s}.proof`);const t=[...n.submissions];t[s][r]=a,k("submissions",t)},w=(s,r,a)=>{if(!a)return;h(s,"proof",a);const t=new FileReader;t.onloadend=()=>y(l=>({...l,[r]:t.result})),t.readAsDataURL(a)},S=d.useMemo(()=>n.submissions.filter(r=>r.link.trim()!==""&&r.proof!==null).length*Number(o.payout),[n.submissions,o.payout]),P=s=>{if(s.preventDefault(),n.submissions.filter(a=>a.link.trim()!==""||a.proof!==null).length===0){u("Please fill in at least one social media platform.");return}v(a=>({...a,submissions:a.submissions.filter(t=>t.link.trim()!==""||t.proof!==null)})),j(route("promoter.gigs.submit.store",o.id),{forceFormData:!0,preserveScroll:!0})};return e.jsxs(L,{user:p.user,children:[e.jsx(E,{title:"Submit Proof"}),e.jsxs("div",{className:"max-w-2xl mx-auto py-12 px-4",children:[(m||Object.keys(c).length>0)&&e.jsxs("div",{className:"mb-6 p-5 bg-red-50 border border-red-200 rounded-[2rem] flex items-start gap-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"mt-1 flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-red-600 font-bold",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-900 text-sm font-black uppercase",children:"Submission Error"}),e.jsx("p",{className:"text-red-700 text-[11px] font-bold mt-0.5",children:m||"Please fix the missing info in the highlighted platforms."})]})]}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-8 bg-white border-b border-gray-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Submit Proof"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Select the platforms you've used"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Payout"}),e.jsxs("p",{className:"text-3xl font-black text-green-600",children:["₦",S.toLocaleString()]})]})]}),e.jsxs("form",{onSubmit:P,className:"p-8 space-y-6",children:[n.submissions.map((s,r)=>{const a=C(s.platform);Object.keys(c).find(i=>i.includes("submissions")&&n.submissions[r].platform===b[r]);const t=c[`submissions.${r}.link`],l=c[`submissions.${r}.proof`],g=s.link.trim()!==""||s.proof!==null;return e.jsxs("div",{className:`p-6 rounded-[2rem] border-2 transition-all duration-300 ${t||l?"border-red-200 bg-red-50/50":g?"border-pink-200 bg-pink-50/10":"border-gray-50 bg-gray-50/30 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border ${a.classes}`,children:a.name}),g&&!t&&!l&&e.jsx("span",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest",children:"Active Submission"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"url",placeholder:"Paste Live Post Link",className:`w-full rounded-xl text-sm font-bold p-3 border-2 transition-all ${t?"border-red-400 focus:ring-red-100":"border-gray-200 focus:border-pink-500"}`,value:s.link,onChange:i=>h(r,"link",i.target.value)}),t&&e.jsx("p",{className:"mt-1 text-[9px] text-red-600 font-black uppercase px-1",children:t})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:`file-${r}`,className:"hidden",accept:"image/*",onChange:i=>w(r,s.platform,i.target.files[0])}),e.jsx("label",{htmlFor:`file-${r}`,className:`block text-center py-3 bg-white border-2 border-dashed rounded-xl cursor-pointer text-[10px] font-black uppercase transition-all ${l?"border-red-300 text-red-500":"border-gray-200 text-gray-400 hover:text-pink-600"}`,children:s.proof?"✓ Screenshot Attached":"Upload Screenshot"}),l&&e.jsx("p",{className:"mt-1 text-[9px] text-red-600 font-black uppercase px-1",children:l})]})]}),e.jsx("div",{className:"h-28 rounded-2xl overflow-hidden border-2 border-gray-100 flex items-center justify-center bg-white shadow-inner",children:x[s.platform]?e.jsx("img",{src:x[s.platform],className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-[8px] font-black uppercase text-gray-300 tracking-tighter",children:"No Preview"})})]})]},s.platform)}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:f,className:"w-full py-5 bg-gray-900 text-white font-black rounded-[1.5rem] shadow-xl hover:bg-pink-600 transition-all uppercase tracking-[0.2em] text-sm disabled:opacity-50",children:f?"Submitting...":"Complete My Payout"})})]})]})]})]})}export{O as default};
