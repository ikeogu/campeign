import{a as P,r as i,u as S,j as e,H as L}from"./app-_d80rueJ.js";import{A as U}from"./AuthenticatedLayout-BCesU4_e.js";import"./ApplicationLogo-CzNbNQnz.js";import"./transition-CUSb6dVT.js";const b=s=>({twitter:{name:"X",icon:"ð•",baseUrl:"https://x.com/",classes:"bg-blue-50 text-blue-600 border-blue-100"},whatsapp:{name:"WhatsApp",icon:"ðŸ’¬",baseUrl:"https://wa.me/",classes:"bg-green-50 text-green-600 border-green-100"},facebook:{name:"Facebook",icon:"ðŸ‘¥",baseUrl:"https://facebook.com/",classes:"bg-indigo-50 text-indigo-600 border-indigo-100"},instagram:{name:"Instagram",icon:"ðŸ“¸",baseUrl:"https://instagram.com/",classes:"bg-pink-50 text-pink-600 border-pink-100"},tiktok:{name:"TikTok",icon:"ðŸŽµ",baseUrl:"https://tiktok.com/@",classes:"bg-slate-900 text-slate-100 border-slate-700"},youtube:{name:"YouTube",icon:"ðŸ“º",baseUrl:"https://youtube.com/@",classes:"bg-red-50 text-red-600 border-red-100"}})[s?.toLowerCase()]||{name:s,icon:"ðŸ”—",baseUrl:"",classes:"bg-gray-50 text-gray-600 border-gray-200"};function H({gig:s}){const{auth:p}=P().props,[d,m]=i.useState(null),x=i.useMemo(()=>{try{const t=s.promoter_social_handles;return typeof t=="string"?JSON.parse(t):t||{}}catch{return{}}},[s.promoter_social_handles]),f=i.useMemo(()=>Array.isArray(s.platforms)?s.platforms:JSON.parse(s.platforms??"[]"),[s.platforms]),{data:l,setData:h,post:g,processing:u,errors:y,transform:k,clearErrors:j}=S({submissions:f.map(t=>({platform:t,link:"",proof:null}))}),c=(t,r,a)=>{m(null),j(`submissions.${t}.${r}`);const o=[...l.submissions];o[t][r]=a,h("submissions",o)},w=(t,r)=>{const a=b(r);let o=x[r.toLowerCase()];if(!o)return;const n=o.replace("@","");c(t,"link",`${a.baseUrl}${n}`)},v=i.useMemo(()=>l.submissions.filter(r=>r.link.trim()!=="").length*Number(s.payout),[l.submissions,s.payout]),N=t=>{if(t.preventDefault(),l.submissions.filter(a=>a.link.trim()!=="").length===0){m("Please fill at least one platform.");return}k(a=>({...a,submissions:a.submissions.filter(o=>o.link.trim()!=="")})),g(route("promoter.gigs.submit.store",s.id),{forceFormData:!0})};return e.jsxs(U,{user:p.user,children:[e.jsx(L,{title:"Submit Proof"}),e.jsx("div",{className:"min-h-screen bg-gray-50/50 pb-24",children:e.jsxs("div",{className:"max-w-xl mx-auto px-4 pt-8 pb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-gray-900 tracking-tighter uppercase",children:"Submit Proof"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest leading-none mt-1 truncate max-w-[250px]",children:s.title})]}),e.jsxs("div",{className:"bg-white px-5 py-3 rounded-2xl border border-gray-100 shadow-sm w-full sm:w-auto flex sm:flex-col justify-between items-center sm:items-end",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Estimated Payout"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-black text-green-600 tracking-tighter",children:["â‚¦",v.toLocaleString()]})]})]}),d&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl font-bold text-[11px] uppercase tracking-wide",children:["âš ï¸ ",d]}),e.jsxs("form",{onSubmit:N,className:"space-y-6 sm:space-y-8",children:[l.submissions.map((t,r)=>{const a=b(t.platform),o=!!x[t.platform.toLowerCase()];return e.jsxs("div",{className:"bg-white rounded-[2rem] sm:rounded-[2.5rem] p-6 sm:p-8 shadow-sm border border-gray-100 space-y-5 animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border font-black text-[9px] uppercase tracking-widest ${a.classes}`,children:[e.jsx("span",{children:a.icon}),a.name]}),o&&e.jsx("button",{type:"button",onClick:()=>w(r,t.platform),className:"text-[9px] font-black text-pink-600 bg-pink-50/50 px-3 py-2 rounded-xl hover:bg-pink-100 transition-colors uppercase tracking-tighter border border-pink-100 active:scale-95",children:"Auto-fill Profile"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase ml-1 tracking-widest",children:"Evidence Link (Post or Profile)"}),e.jsx("input",{type:"url",placeholder:`Paste your ${a.name} link here...`,className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold text-base sm:text-sm focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 transition-all placeholder:text-gray-300 placeholder:font-normal",value:t.link,onChange:n=>c(r,"link",n.target.value)}),y[`submissions.${r}.link`]&&e.jsx("p",{className:"text-red-500 text-[9px] font-black uppercase mt-1 ml-1",children:"Invalid or duplicate link"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex justify-between text-[10px] font-black text-gray-400 uppercase ml-1 tracking-widest",children:[e.jsx("span",{children:"Media Proof"}),e.jsx("span",{className:"text-[8px] opacity-60",children:"Optional"})]}),e.jsxs("div",{className:"relative border-2 border-dashed border-gray-100 rounded-2xl p-5 text-center hover:border-pink-200 transition-colors group bg-gray-50/30",children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:n=>c(r,"proof",n.target.files[0])}),e.jsxs("div",{className:"flex items-center justify-center gap-3 pointer-events-none",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-gray-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}),e.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest truncate max-w-[150px]",children:t.proof?t.proof.name:"Tap to upload screenshot"})]})]})]})]},t.platform)}),e.jsx("div",{className:"pt-6 sticky bottom-4 z-20",children:e.jsx("button",{type:"submit",disabled:u,className:"w-full py-5 bg-gray-900 text-white font-black rounded-2xl hover:bg-pink-600 shadow-2xl shadow-gray-300 transition-all active:scale-95 disabled:opacity-50 uppercase text-xs tracking-[0.2em]",children:u?"Uploading Data...":"Submit All Proofs"})})]})]})})]})}export{H as default};
