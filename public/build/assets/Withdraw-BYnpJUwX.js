import{a as w,r as p,u as _,j as e}from"./app-CwKyFJJF.js";import{A as C}from"./AuthenticatedLayout-BEGUbsR7.js";import"./ApplicationLogo-CdWcavCF.js";import"./transition-CbAOMiPF.js";function D({banks:j}){const{auth:A,wallet:x,config:y,flash:l}=w().props,[s,i]=p.useState(""),[b,g]=p.useState(!1),{data:a,setData:n,post:N,processing:h,errors:r}=_({amount:"",bank_code:"",account_number:"",account_name:"",narration:""}),u=Number(y.transfer_fee)||0,o=Number(a.amount)||0,f=o*u/100,m=o+f,d=m>x;p.useEffect(()=>{a.account_number.length===10&&a.bank_code?v():i("")},[a.account_number,a.bank_code]);const v=async()=>{g(!0);try{const c=await(await fetch(route("api.bank.resolve",{account_number:a.account_number,bank_code:a.bank_code}))).json();c.account_name?(i(c.account_name),n("account_name",c.account_name)):i("Could not verify account")}catch{i("Error verifying account")}finally{g(!1)}},k=t=>{t.preventDefault(),N(route("withdraw.store"))};return e.jsx(C,{header:"Withdraw Earnings",children:e.jsx("div",{className:"max-w-xl mx-auto py-12 px-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-gray-100 p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Available Wallet Balance"}),e.jsxs("p",{className:"text-4xl font-black text-green-600 tracking-tighter",children:["₦",x.toLocaleString()]})]}),l?.error&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl font-bold text-sm",children:["⚠️ ",l.error]}),l?.message&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl font-bold text-sm flex items-center gap-3 animate-in fade-in zoom-in",children:[e.jsx("div",{className:"bg-green-500 text-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),l.message]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Amount to Withdraw"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:`w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500 transition-all ${d?"border-red-500 ring-2 ring-red-500/20":""}`,value:a.amount,onChange:t=>n("amount",t.target.value),placeholder:"0.00"}),e.jsx("button",{type:"button",onClick:()=>{const t=x/(1+u/100);n("amount",Math.floor(t).toString())},className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-green-600 bg-green-50 px-3 py-1.5 rounded-xl hover:bg-green-100 transition-colors uppercase",children:"Max"})]}),d&&e.jsxs("div",{className:"mt-2 flex gap-2 items-start bg-red-50 p-3 rounded-xl border border-red-100",children:[e.jsx("span",{className:"text-red-500",children:"⚠️"}),e.jsxs("p",{className:"text-red-600 text-[10px] font-bold leading-tight uppercase",children:["Insufficient Balance: Your total cost (₦",m.toLocaleString(),") exceeds your balance. Please enter a lower amount."]})]}),r.amount&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:r.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Select Bank"}),e.jsxs("select",{className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500",value:a.bank_code,onChange:t=>n("bank_code",t.target.value),children:[e.jsx("option",{value:"",children:"Choose your bank..."}),j.map((t,c)=>e.jsx("option",{value:t.code,children:t.name},`${t.code}-${c}`))]}),r.bank_code&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:r.bank_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Account Number"}),e.jsx("input",{type:"text",maxLength:"10",className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500",value:a.account_number,onChange:t=>n("account_number",t.target.value),placeholder:"10-digit account number"}),b&&e.jsx("p",{className:"text-[10px] text-blue-500 font-bold mt-2 animate-pulse",children:"Verifying account..."}),s&&e.jsx("p",{className:`text-[10px] mt-2 font-black uppercase tracking-widest ${s.includes("Could not")?"text-red-500":"text-green-600"}`,children:s}),r.account_number&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:r.account_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Narration / Remark (Optional)"}),e.jsx("textarea",{className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold text-sm focus:ring-green-500 resize-none",value:a.narration,onChange:t=>n("narration",t.target.value),placeholder:"e.g. Savings withdrawal",rows:"2"}),r.narration&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:r.narration})]}),o>0&&e.jsxs("div",{className:"bg-gray-50 p-5 rounded-[2rem] border border-dashed border-gray-200 space-y-3 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-gray-400",children:[e.jsx("span",{children:"Withdrawal Amount"}),e.jsxs("span",{className:"text-gray-900",children:["₦",o.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[e.jsxs("span",{className:"text-gray-400",children:["Processing Fee (",u,"%)"]}),e.jsxs("span",{className:"text-red-500",children:["+ ₦",f.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-black text-[11px] uppercase tracking-widest",children:"Total to be Deducted"}),e.jsxs("span",{className:`font-black text-lg ${d?"text-red-600":"text-gray-900"}`,children:["₦",m.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),e.jsx("button",{type:"submit",disabled:h||!s||s.includes("Could not")||b||d||o<=0,className:"w-full py-5 bg-green-600 text-white font-black rounded-2xl hover:bg-green-700 shadow-xl shadow-green-200 transition-all active:scale-95 disabled:opacity-50 disabled:grayscale uppercase text-[10px] tracking-widest",children:h?"Processing Payout...":"Confirm Withdrawal"})]})]})})})}export{D as default};
