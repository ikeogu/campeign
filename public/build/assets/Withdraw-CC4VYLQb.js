import{a as w,r as x,u as _,j as e}from"./app-BcjYFqi5.js";import{A as C}from"./AuthenticatedLayout-DwIPJsqU.js";import"./ApplicationLogo-dbJw4VBu.js";import"./transition-3VN1dWSw.js";function F({banks:f}){const{auth:A,wallet:u,config:j,flash:c}=w().props,[s,l]=x.useState(""),[m,p]=x.useState(!1),{data:a,setData:r,post:y,processing:b,errors:i}=_({amount:"",bank_code:"",account_number:"",account_name:"",narration:""}),g=Number(j.transfer_fee)||0,n=Number(a.amount)||0,h=n*g/100,N=n-h,d=n>u;x.useEffect(()=>{a.account_number.length===10&&a.bank_code?v():l("")},[a.account_number,a.bank_code]);const v=async()=>{p(!0);try{const o=await(await fetch(route("api.bank.resolve",{account_number:a.account_number,bank_code:a.bank_code}))).json();o.account_name?(l(o.account_name),r("account_name",o.account_name)):l("Could not verify account")}catch{l("Error verifying account")}finally{p(!1)}},k=t=>{t.preventDefault(),y(route("withdraw.store"))};return e.jsx(C,{header:"Withdraw Earnings",children:e.jsx("div",{className:"max-w-xl mx-auto py-12 px-4",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-gray-100 p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Available Wallet Balance"}),e.jsxs("p",{className:"text-4xl font-black text-green-600 tracking-tighter",children:["₦",u.toLocaleString()]})]}),c?.error&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl font-bold text-sm",children:["⚠️ ",c.error]}),c?.message&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 text-green-700 rounded-2xl font-bold text-sm flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-500 text-white rounded-full p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),c.message]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Total Amount to Withdraw"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:`w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500 transition-all ${d?"border-red-500 ring-2 ring-red-500/20":""}`,value:a.amount,onChange:t=>r("amount",t.target.value),placeholder:"0.00"}),e.jsx("button",{type:"button",onClick:()=>r("amount",Math.floor(u).toString()),className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-green-600 bg-green-50 px-3 py-1.5 rounded-xl hover:bg-green-100 transition-colors uppercase",children:"Max"})]}),d&&e.jsx("p",{className:"text-red-600 text-[10px] mt-2 font-bold uppercase",children:"⚠️ This amount exceeds your balance."}),i.amount&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:i.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Select Bank"}),e.jsxs("select",{className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500",value:a.bank_code,onChange:t=>r("bank_code",t.target.value),children:[e.jsx("option",{value:"",children:"Choose your bank..."}),f.map((t,o)=>e.jsx("option",{value:t.code,children:t.name},`${t.code}-${o}`))]}),i.bank_code&&e.jsx("p",{className:"text-red-500 text-[10px] mt-1 font-bold",children:i.bank_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Account Number"}),e.jsx("input",{type:"text",maxLength:"10",className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold focus:ring-green-500",value:a.account_number,onChange:t=>r("account_number",t.target.value),placeholder:"10-digit account number"}),m&&e.jsx("p",{className:"text-[10px] text-blue-500 font-bold mt-2 animate-pulse",children:"Verifying..."}),s&&e.jsx("p",{className:`text-[10px] mt-2 font-black uppercase tracking-widest ${s.includes("Could not")?"text-red-500":"text-green-600"}`,children:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 ml-1",children:"Narration (Optional)"}),e.jsx("textarea",{className:"w-full bg-gray-50 border-gray-100 rounded-2xl px-5 py-4 font-bold text-sm focus:ring-green-500 resize-none",value:a.narration,onChange:t=>r("narration",t.target.value),placeholder:"Description of withdrawal",rows:"2"})]}),n>0&&e.jsxs("div",{className:"bg-gray-50 p-5 rounded-[2rem] border border-dashed border-gray-200 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-gray-400",children:[e.jsx("span",{children:"Total Wallet Deduction"}),e.jsxs("span",{className:"text-gray-900 font-bold",children:["₦",n.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[e.jsxs("span",{className:"text-gray-400",children:["Processing Fee (",g,"%)"]}),e.jsxs("span",{className:"text-red-500",children:["- ₦",h.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900 font-black text-[11px] uppercase tracking-widest",children:"Amount You Receive"}),e.jsxs("span",{className:`font-black text-lg ${d?"text-red-600":"text-green-600"}`,children:["₦",N.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),e.jsx("button",{type:"submit",disabled:b||!s||s.includes("Could not")||m||d||n<=0,className:"w-full py-5 bg-green-600 text-white font-black rounded-2xl hover:bg-green-700 shadow-xl transition-all active:scale-95 disabled:opacity-50 uppercase text-[10px] tracking-widest",children:b?"Processing...":"Confirm Withdrawal"})]})]})})})}export{F as default};
